---
title: "Artificial intelligence and computer vision in automatic plant recognition: a scientometric analysis"
author: "Natally Celestino Gama, Luiz Eduardo S. Oliveira, Samuel de PÃ¡dua C. e Carvalho, Eduardo Silva Leal, Joielan Xipaia dos Santos, Deivison Venicio Souza"
date: "2023 - 08 - 2023"
output:
  rmdformats::readthedown 
---


```{r message=FALSE, warning=FALSE}
library(bibliometrix)
library(summarytools)
library(tidyverse)
library(patchwork)
```

# Scientometric Analysis

(i) Are there any expected trends for future published manuscripts based on current studies?; 

(ii) Which botanical structures of plants are being most used in research?; 

(iii) What types of life forms are being most cited in studies? 

(iv) Which image feature extraction techniques are being most used?; 

(v) What are the main classification techniques used to develop recognition models, and which have shown the best statistical performance? 


## Loading data

```{r message=FALSE, warning=FALSE, paged.print=FALSE}
s <- convert2df('Data/scopus.bib', dbsource = "scopus", format = "bibtex")
w <- convert2df('Data/savedrecs.bib', dbsource = "wos", format = "bibtex")
w1<- convert2df('Data/savedrecs (1).bib', dbsource = "wos", format = "bibtex")
```

## Joining data and removing duplicates
```{r message=FALSE, warning=FALSE}
U <- mergeDbSources(s,w,w1, remove.duplicated = TRUE)
```


## Summarize data
```{r message=FALSE, warning=FALSE}
R <- biblioAnalysis(U)
DS <- summary(object = R, k = 10)
plot(R, k = 10)
```


# Revision

## Loading and analyzing database structure
```{r message=FALSE, warning=FALSE, paged.print=FALSE}
(data <- readr::read_csv2('Data/Dadostriagem2.csv'))
data$accuracy <- as.numeric(data$accuracy)
data$N <- as.factor(data$N)
glimpse(data)
```

## Graphical View

### Creating a count table of Main botanical structures (Top 7)
```{r message=FALSE, warning=FALSE}
cont_eb <- data %>%
  distinct(N, .keep_all = TRUE) %>%                                              # remove duplicated
  group_by(morphological_structure) %>% 
  summarise(cont = n()) %>% 
  mutate(pct = prop.table(cont)) %>% 
  slice_max(cont, n = 7)
```

### Botanical Structures Chart
```{r message=FALSE, warning=FALSE}
(A1 <- cont_eb %>% 
    ggplot(aes(label = scales::percent(pct)))+
    geom_bar(aes(x = reorder(morphological_structure, +cont), y = cont), 
             stat = "identity", fill = "#000004", width = .80) +
    geom_label(aes(x = morphological_structure,y = cont), 
               position =   position_dodge(width = .9),
               size = 2) +
    theme_classic(base_size = 10) +
    theme(axis.text.x=element_text(face = "bold")) +
    xlab("Botanical structures") +
    ylab("N. of articles") +
    ggtitle("A")+
    coord_flip()
)
```

### Creating life form types count table (Top 7)
```{r message=FALSE, warning=FALSE}
cont_tv <- data %>%
  distinct(N, .keep_all = TRUE) %>%
  group_by(Life_forms) %>% 
  summarise(cont = n()) %>%
  mutate(pct = prop.table(cont)) %>%
  filter(Life_forms != "NI") %>%
  slice_max(cont, n = 7)
```

### Chart of Types of Life Forms
```{r message=FALSE, warning=FALSE}
(A2 <- cont_tv %>%
    ggplot(aes(label = scales::percent(pct))) +
    geom_bar(aes(x = reorder(Life_forms, +cont), y = cont),
             stat = "identity", fill = "#000004", width = .80) +
    geom_label(aes(x = Life_forms,y = cont), 
               position =   position_dodge(width = .9),
               size = 2) +
    theme_classic(base_size = 10) +
    theme(axis.text.x=element_text(face = "bold")) +
    xlab("Types of life forms ") +
    ylab("N. of articles") +
    ggtitle("B")+
    coord_flip()
)
```

### Creating extracted features count table (Top 5)
```{r message=FALSE, warning=FALSE}
cont_re <- data %>%
  distinct(N, .keep_all = TRUE) %>%
  group_by(extracted_features) %>% 
  summarise(cont = n()) %>% 
  mutate(pct = prop.table(cont)) %>% 
  slice_max(cont, n = 5)
```

### Extracted Features Chart
```{r message=FALSE, warning=FALSE}
(A3 <- cont_re %>%
    ggplot(aes(label = scales::percent(pct))) +
    geom_bar(aes(x = reorder(extracted_features, +cont), y = cont), 
             stat = "identity", fill = "#000004", width = .80) +
    geom_label(aes(x = extracted_features,y = cont), 
               position =   position_dodge(width = .9),
               size = 2) +
    theme_classic(base_size = 10) +
    theme(axis.text.x=element_text(face = "bold")) +
    xlab("Types of features extracted ") +
    ylab("N. of articles") +
    ggtitle("B") +
    coord_flip()
)
```

### Creating plant origin count table (Top 5)
```{r message=FALSE, warning=FALSE}
cont_orig <- data %>%
  distinct(N, .keep_all = TRUE) %>%
  filter(country_of_origin != "NI") %>%
  group_by(country_of_origin) %>% 
  summarise(cont = n()) %>% 
  mutate(pct = prop.table(cont)) %>% 
  slice_max(cont, n = 5)
```

### Chart of countries of origin of plants
```{r message=FALSE, warning=FALSE}
(A4 <- cont_orig %>% 
    ggplot(aes(label = scales::percent(pct))) +
    geom_bar(aes(x = reorder(country_of_origin, +cont), y = cont), 
             stat = "identity", fill = "#000004", width = .80) +
    geom_label(aes(x = country_of_origin, y = cont), 
               position =   position_dodge(width = .9),
               size = 2) +
    theme_classic(base_size = 10) +
    theme(axis.text.x=element_text(face = "bold")) +
    xlab("Countries of origin for image sets ") +
    ylab("N. of articles") +
    ggtitle("A")+
    coord_flip()
)
```

### Creating descriptors table (Top 5)
```{r message=FALSE, warning=FALSE}
crono <- data %>% 
  mutate(Class = case_when((year <= 2008) ~ "1986-2008",
                             (year >= 2009 & year <= 2014) ~ "2009-2014",
                             (year > 2014) ~ "2015-2023")) %>% 
  distinct(N, .keep_all = TRUE) %>%
  select(extraction_techniques, Class) %>% 
  group_by(extraction_techniques, Class) %>% 
  summarise(n = n()) %>% 
  arrange(Class, n)

crono <- crono %>%
  group_by(Class) %>% 
  slice_max(n, n=5)
```

### Descriptor Count Chart
```{r message=FALSE, warning=FALSE}
(B1 <- ggplot(crono) +
    geom_bar(aes(x = Class, fill = extraction_techniques, y= n), 
             position = "dodge", stat = "identity") +
    theme_light(base_size = 10) +
    theme(axis.text.x=element_text(face = "bold")) +
    xlab("Years") +
    ylab("Cited descriptors") +
    labs(fill = "Feature Descriptors") +
    scale_fill_viridis_d(option = "magma")
)
```

### Creating Table of Classification Techniques by Period (Top 5)
```{r message=FALSE, warning=FALSE}
crono_clas <- data %>% 
  mutate(Class = case_when((year <= 2008) ~ "1986-2008",
                             (year >= 2009 & year <= 2014) ~ "2009-2014",
                             (year > 2014) ~ "2015-2023")) %>% 
  distinct(N, .keep_all = TRUE) %>%
  select(classification_techniques, Class, accuracy) %>% 
  group_by(classification_techniques, Class)

crono_clas <- na.omit(crono_clas) 

crono_clas <- crono_clas %>%
  group_by(classification_techniques, Class) %>%
  summarise(mean_ac = round(mean(accuracy)), n = n()) %>% 
  arrange(Class, n)

crono_clas <- crono_clas %>%
  group_by(Class) %>% 
  slice_max(n, n=5)
```


### Classifier Count Chart
```{r message=FALSE, warning=FALSE}
(B2 <- ggplot(crono_clas) +
    geom_bar(aes(x = Class, fill = classification_techniques, y = n), 
             position = "dodge", stat = "identity") +
    theme_light(base_size = 10) +
    theme(axis.text.x=element_text(face = "bold")) +
    xlab(NULL) +
    ylab("Classifiers cited") +
    labs(fill = "Classification Techniques") +
    scale_fill_viridis_d(option = "magma") +
    ggtitle("A")
)
```

### Generating average accuracy graph per classifier
```{r message=FALSE, warning=FALSE}
(B3 <- crono_clas %>% 
    ggplot(aes(label = scales::number(mean_ac)))+
    geom_bar(aes(x = Class, fill = classification_techniques, y = mean_ac), 
             position = "dodge", stat = "identity") +
    geom_text(aes(x = Class, group = classification_techniques, y = mean_ac), 
              position =   position_dodge(width = .9),
              size = 1.7,
              vjust = -0.3,
              hjust = 0.5) +
    theme_light(base_size = 10) +
    theme(axis.text.x=element_text(face = "bold")) +
    scale_y_continuous(breaks = seq(0,100,20))+
    xlab("Years") +
    ylab("Average accuracy (%)") +
    labs(fill = "Classification Techniques")+
    scale_fill_viridis_d(option = "magma") +
    ggtitle("C")
)
```

### Generating a graph of the evolution of CNNs over the years (2015-2023)
```{r message=FALSE, warning=FALSE}
cnn <- data %>% 
  distinct(N, .keep_all = TRUE) %>%
  select(classification_techniques, year, accuracy) %>% 
  filter(classification_techniques == "Convolutional Neural Networks (CNN)", 
         year != "2014") %>%
  group_by(year) %>% 
  summarise(cont = n())

(B4 <- cnn %>% 
    ggplot(aes(x = year, y = cont), stat = "identity") +
    geom_line() +
    #geom_point() +
    theme_classic(base_size = 6) +
    theme(axis.text.x=element_text(face = "bold")) +
    scale_fill_manual(values = c("#2c115f")) +
    xlab("Years") +
    ylab("CNN") +
    ggtitle("B")
)
```







